<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Report Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/styles.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Expense Report Assistant</h1>
            <p class="subtitle">Ask questions about expense policies or submit expense reports</p>
        </header>

        <div class="chat-container">
            {% if error %}
            <div class="error-message">
                <strong>Error:</strong> {{ error }}
            </div>
            {% endif %}

            {% if conversation %}
            <div class="conversation">
                {% for msg in conversation %}
                    {% if msg.role == "user" %}
                    <div class="message user-message">
                        <div class="message-label">You</div>
                        <div class="message-content">{{ msg.content }}</div>
                    </div>
                    {% elif msg.role == "assistant" %}
                    <div class="message assistant-message">
                        <div class="message-label">Agent</div>
                        <div class="message-content">{{ msg.content }}</div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="welcome-message">
                <h2>Welcome!</h2>
                <p>I'm your expense report assistant. I can help you with:</p>
                <ul>
                    <li>Understanding expense policies</li>
                    <li>Submitting expense reports</li>
                    <li>Answering questions about reimbursement procedures</li>
                </ul>
                <p>Type your question or request below to get started.</p>
            </div>
            {% endif %}
        </div>

        <form method="post" action="/chat" class="chat-form">
            <div class="input-group">
                <textarea
                    name="message"
                    id="message"
                    placeholder="Ask about expense policies or submit an expense report..."
                    required
                    rows="3"
                ></textarea>
            </div>
            <button type="submit" class="submit-button">Send Message</button>
        </form>
    </div>

    <script>
        // Auto-focus on the textarea when page loads
        document.getElementById('message').focus();

        // Optional: Clear textarea after successful submission
        {% if conversation %}
        document.getElementById('message').value = '';
        {% endif %}
    </script>
</body>
</html>
